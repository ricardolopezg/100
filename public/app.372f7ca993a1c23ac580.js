webpackJsonp([1,2],{169:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e._id,n=(e.uid,e.thread,e.message),r=e.edited,a=void 0!==r&&r,o=(e.updatedAt,e.createdAt),u=e.actions;return s.default.createElement("li",{className:"message-item"},s.default.createElement("article",null,s.default.createElement("header",null),s.default.createElement("p",null,n),s.default.createElement("footer",null,s.default.createElement("span",null,s.default.createElement("small",null,"Published: ",s.default.createElement("time",{dateTime:o},o)),s.default.createElement("small",null,""+(a.length?". Edited: "+a[a.length-1]+". ":""))),s.default.createElement("button",{type:"button"},"Edit"),s.default.createElement("button",{type:"button",onClick:function(e){return u.deleteMessage(t)}},"Delete"))))}function o(e){var t=(e.user,e.time),n=e.action;return s.default.createElement("p",null,s.default.createElement("small",null,"event: "+n+", time: "+t+"."))}function u(e){var t=e.messages,n=e.events,r=e.typing,u=e.party,i=e.thread,c=e.actions;return i?s.default.createElement("section",null,s.default.createElement("header",null,s.default.createElement("h3",null,i._id," ",s.default.createElement("button",{type:"button",style:{float:"right"},onClick:function(){return c.deleteThread(i._id)}},"Delete"))),s.default.createElement("ul",{className:"message-list"},t.filter(function(e){return e.thread===i._id}).map(function(e){return s.default.createElement(a,l({key:e._id,actions:c},e))}).concat(n.map(function(e){return s.default.createElement(o,l({key:e.time},e))}))),s.default.createElement("footer",null,s.default.createElement("h5",null,"party members: ",""+u.length,". ",s.default.createElement("small",null,u.map(function(e){return"Id: "+e.id+", present "+e.present}).join(". "))),s.default.createElement("p",null,s.default.createElement("small",null,""+(r.length?r.join(", "):"None")," typing.")))):null}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=u;var i=n(2),s=r(i);u.propTypes={messages:i.PropTypes.array}},170:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){switch(t){case"create":return function(t){return{type:e,text:t}};case"delete":return function(t){return{type:e,payload:{index:t}}};case"update":return function(t){return{type:e,payload:o({},t)}};default:return function(){}}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=t.CREATE_TODO="CREATE_TODO",l=t.DELETE_TODO="DELETE_TODO",i=t.UPDATE_TODO="UPDATE_TODO",s=t.FETCH_TODOS="FETCH_TODOS";t.default=[u,l,i,s].reduce(function(e,t){var n=""+t,u=n.replace(/_TODO?S/,"").toLowerCase();return o({},e,r({},u,a(t,u)))},{})},171:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return function(t,r){function a(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.connected,a=i.disconnected,o=i.id,u=void 0===o?null:o,s=i.nsp;return t(l({type:e,ns:s,socket:{connected:r,disconnected:a,id:u,socket:i}},n))}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments[1];arguments[2];return function(n){var r=JSON.parse(n);return a(E,{event:t,data:r}),e(r)}}var u=r().socket;if(e in u)return u[e].connect();var i=io.connect(e,u.options);return i.on("connect",function(){return a(g)}).on("disconnect",function(){return a(O)}).on("reconnect",function(e){return a(b,{count:e})}).on("reconnecting",function(e){return a(m,{count:e})}).on("reconnect_attempt",function(){return a(T)}).on("reconnect_failed",function(){return a(_)}).on("reconnect_error",function(e){return a(c,{error:e})}).on("error",function(e){return a(c,{error:e})}).on("connect_error",function(e){return a(c,{error:e})}).on("connect_timeout",function(){return a(s)}).on("message",function(e){return a(d,{payload:JSON.parse(e)})}),n(i,t),a(h,{actions:{send:function(e,n){return t(function(t){return i.send(JSON.stringify(e),o(n,"message",e)),a(p,{payload:{data:e,callback:n,event:"message"}})})},emit:function(e,n,r){return t(function(t){return i.emit(e,JSON.stringify(n),o(r,e,n)),a(f,{payload:{data:n,callback:r,event:e}})})},open:function(){return i.open()},close:function(){return i.close()},connect:function(){return i.connect()},disconnect:function(){return i.disconnect()},destroy:function(){return a(S)}}})}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{transports:["websocket"]};return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{io:e,options:t,namespaces:[],rooms:[],errors:[]},o=arguments[1],u=o.type,i=o.ns,d=o.socket,f=o.actions,p=(o.count,o.error),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l({},n,a({},i,l({},n[i]||{},d,t)),e)};switch(u){default:return n;case h:return m({namespaces:[].concat(r(n.namespaces),[i])},l({},f,{ns:i}));case y:return m();case g:return m();case b:return m();case v:return m();case O:return m();case S:return delete n[i],m({namespaces:n.namespaces.filter(function(e){return e!==i})});case s:return m();case c:return m({errors:[].concat(r(n.errors),[p])})}}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=u;var i=["@@io/INITIALIZE","@@io/TIMEOUT","@@io/ERROR","@@io/EVENT","@@io/MESSAGE","@@io/EMIT","@@io/SEND","@@io/RECONNECTING","@@io/ACKNOWLEDGED","@@io/INITIALIZED","@@io/CONNECTED","@@io/OPENED","@@io/CLOSED","@@io/RECONNECTED","@@io/RECONNECT_FAILED","@@io/RECONNECT_ATTEMPT","@@io/DISCONNECTED","@@io/DESTROYED"],s=(i[0],i[1]),c=i[2],d=(i[3],i[4]),f=i[5],p=i[6],m=i[7],E=i[8],h=i[9],g=i[10],y=i[11],v=i[12],b=i[13],_=i[14],T=i[15],O=i[16],S=i[17];({transports:["websocket"],reconnection:!0,reconnectionAttempts:Math.Infinity,reconnectionDelay:1e3,reconnectionDelayMax:5e3,randomizationFactor:.5,timeout:2e4,autoConnect:!0}),t.ACTIONS={connect:o}},252:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}n(161);var a=n(2),o=r(a),u=n(162),l=r(u),i=n(38),s=n(82),c=n(282),d=r(c),f=n(287),p=r(f);n(481);var m=(0,p.default)(__INITIAL_STATE__||void 0,{history:i.browserHistory}),E=(0,s.syncHistoryWithStore)(i.browserHistory,m);l.default.render(o.default.createElement(d.default,{store:m,history:E}),document.getElementById("app"))},271:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Profile=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),s=r(i),c=n(38),d=(t.Profile=function(e){var t=e.user;return t&&t.loggedIn?s.default.createElement("section",null,s.default.createElement("header",null,s.default.createElement("h3",null,"Email: "+t.email.address+", verified: "+!!t.email.verified+".")),s.default.createElement("button",{type:"button",onClick:function(e){return e}},"Verify Email")):s.default.createElement("section",null,s.default.createElement("header",null,s.default.createElement("h3",null,"Oops!")),s.default.createElement("footer",null,s.default.createElement("p",null,"You need to be logged in to view your profile. ",s.default.createElement(c.Link,{to:"/login"},s.default.createElement("u",null,"Login now."))),s.default.createElement("p",null,"Forgot your password? It happens. ",s.default.createElement(c.Link,{to:"/triage"},s.default.createElement("u",null,"Visit the triage."))),s.default.createElement("p",null,"Don't have an account? ",s.default.createElement(c.Link,{to:"/register"},s.default.createElement("u",null,"Come join the family.")))))},function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),l(t,[{key:"render",value:function(){var e=this.props.user,t=void 0===e?{}:e;return s.default.createElement("section",null,s.default.cloneElement(this.props.children,{user:t}))}}]),t}(i.PureComponent));t.default=d,d.propTypes={}},272:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2),d=r(c),f=n(82),p=n(106),m=n(83),E=n(171),h=n(285),g=(r(h),n(280)),y=r(g),v=function(e){function t(e){o(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={fullscreen:!1,logs:[]},n}return l(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.props,n=(this.state,this.compareAndCast),r=t.dispatch,a=t.user,o=t.socket,u=t.messenger,l=t.todo,i=t.router;return d.default.createElement("main",{id:"main",role:"main",ref:function(t){return t?e.main=t:null}},d.default.createElement("section",{className:"navigator",id:"nav"},d.default.createElement(y.default,null),d.default.createElement("section",{className:"main-content"},t.children?n(t.children,{app:{},dispatch:r,user:a,todo:l,messenger:u,socket:o,router:i}):null),d.default.createElement("footer",null,d.default.createElement("h6",{style:{textAlign:"center"}},"Copyright © "+(new Date).getFullYear()+" 100 L.L.C. All Rights Reserved."))))}},{key:"compareAndCast",value:function(e,t){return d.default.cloneElement(e,t)}}]),t}(c.PureComponent);v.propTypes={children:c.PropTypes.element,history:c.PropTypes.object,location:c.PropTypes.object,params:c.PropTypes.object,route:c.PropTypes.object,routes:c.PropTypes.array,routeParams:c.PropTypes.object,routing:c.PropTypes.object,socket:c.PropTypes.object,router:c.PropTypes.object,user:c.PropTypes.object,messenger:c.PropTypes.object,posts:c.PropTypes.array,todo:c.PropTypes.object,tokens:c.PropTypes.object},v.defaultProps={},t.default=(0,p.connect)(function(e,t){return i({},t,e)},function(e,t){return{dispatch:e,tokens:{set:function(t,n){return e({type:"@@tokens/SET",key:t,value:n})},remove:function(t){return e({type:"@@tokens/REMOVE",key:t})},clear:function(){return e({type:"@@tokens/CLEAR"})}},socket:(0,m.bindActionCreators)(E.ACTIONS,e),router:(0,m.bindActionCreators)({push:f.push,replace:f.replace,go:f.go,goForward:f.goForward,goBack:f.goBack},e)}},function(e,t,n){return i({},Object.keys(t).reduce(function(e,n){return e[n]?i({},e,a({},n,i({},e[n],t[n]))):i({},e,a({},n,t[n]))},i({},e)))},{pure:!0,withRef:!1})(v)},273:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Recovery=t.Triage=t.Register=t.Login=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),c=r(s),d=n(38),f=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={email:"",password:"",token:null},n.send=n.send.bind(n),n.login=n.login.bind(n),n.register=n.register.bind(n),n.recover=n.recover.bind(n),n.verify=n.verify.bind(n),n.updateEmail=n.updateEmail.bind(n),n.updatePassword=n.updatePassword.bind(n),n}return u(t,e),i(t,[{key:"componentWillMount",value:function(){this.props.socket.connect("/users")}},{key:"componentWillUnmount",value:function(){this.props.socket["/users"].disconnect()}},{key:"render",value:function(){var e=this.props,t=this.state,n=this.login,r=this.register,a=this.recover,o=this.verify,u=this.updateEmail,l=this.updatePassword,i=t.email,s=t.password;return c.default.cloneElement(e.children,{email:i,password:s,login:n,register:r,recover:a,verify:o,updateEmail:u,updatePassword:l})}},{key:"send",value:function e(t,n,r){var e=this.props.socket["/users"].send,a=this.props.socket["/users"].id;return e({type:"method",name:"user",action:t,data:l({},n,{id:a})},function(e){console.log("acknowledgement message: ",e),r(e)})}},{key:"login",value:function(e,t){var n=this,r=this.state,a=r.email,o=void 0===a?e:a,u=r.password,l=void 0===u?t:u;return console.log(o,l),this.send("login:email",{email:o,password:l},function(e){var t=e.data,r=e.error;if(r)return n.setState({error:r});t.user,t.token})}},{key:"register",value:function(e,t){var n=this,r=this.state,a=r.email,o=void 0===a?e:a,u=r.password,l=void 0===u?t:u,i=this.props.dispatch;return console.log(o,l),this.send("create",{email:o,password:l},function(e){var t=e.data,r=e.error;if(r)return n.setState({error:r});var a=t.user,o=t.token;return i({type:"@@tokens/SET",key:"login.token",value:o}),i({type:"@@user/LOGIN",user:a,token:o})})}},{key:"recover",value:function(e){var t=this.state.email,n=void 0===t?e:t;console.log(n)}},{key:"verify",value:function(){var e=this.state.token;console.log(e)}},{key:"updateEmail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return this.setState({email:e},t)}},{key:"updatePassword",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return this.setState({password:e},t)}}]),t}(s.PureComponent);t.default=f;var p=t.Login=function(e){var t=e.email,n=e.password,r=e.login,a=e.updateEmail,o=e.updatePassword;return c.default.createElement("section",{className:"auth-login"},c.default.createElement("header",null,c.default.createElement("h3",null,"Log In")),c.default.createElement("form",{id:"login",onSubmit:function(e){e.preventDefault();var t=document.getElementById("email"),n=document.getElementById("password");return r(t,n)}},c.default.createElement("div",null,c.default.createElement("input",{id:"email",type:"email",value:t,placeholder:"email",onChange:function(e){return a(e.target.value)}})),c.default.createElement("div",null,c.default.createElement("input",{id:"password",type:"password",value:n,placeholder:"password",onChange:function(e){return o(e.target.value)}})),c.default.createElement("button",{type:"submit"},"Continue")),c.default.createElement("footer",null,c.default.createElement("p",null,"Forgot your password? It happens. ",c.default.createElement(d.Link,{to:"/triage"},c.default.createElement("u",null,"Visit the triage."))),c.default.createElement("p",null,"Don't have an account? ",c.default.createElement(d.Link,{to:"/register"},c.default.createElement("u",null,"Come join the family.")))))};p.propTypes={};var m=t.Register=function(e){var t=e.email,n=e.password,r=e.register,a=e.updateEmail,o=e.updatePassword;return c.default.createElement("section",{className:"auth-register"},c.default.createElement("header",null,c.default.createElement("h3",null,"Sign Up")),c.default.createElement("form",{id:"register",onSubmit:function(e){e.preventDefault();var t=document.getElementById("email"),n=document.getElementById("password");return r(t,n)}},c.default.createElement("div",null,c.default.createElement("input",{id:"email",type:"email",value:t,placeholder:"email",onChange:function(e){return a(e.target.value)}})),c.default.createElement("div",null,c.default.createElement("input",{id:"password",type:"password",value:n,placeholder:"password",onChange:function(e){return o(e.target.value)}})),c.default.createElement("button",{type:"submit"},"Continue")),c.default.createElement("footer",null,c.default.createElement("p",null,"Already have an account? ",c.default.createElement(d.Link,{to:"/login"},c.default.createElement("u",null,"Log in."))),c.default.createElement("p",null,"Forgot your password? It happens. ",c.default.createElement(d.Link,{to:"/triage"},c.default.createElement("u",null,"Visit the triage.")))))};m.propTypes={};var E=t.Triage=function(e){return c.default.createElement("section",null,c.default.createElement("header",null,c.default.createElement("h3",null,"Triage")),c.default.createElement("form",{id:"triage",onSubmit:function(t){t.preventDefault();var n=document.getElementById("email");return e.recover(n)}},c.default.createElement("p",null,"If you forgot your password, go ahead and supply your email to reset your credentials."),c.default.createElement("input",{id:"email",type:"email",placeholder:"email"}),c.default.createElement("button",{type:"submit"},"Send Email")),c.default.createElement("footer",null,c.default.createElement("p",null,"Suddenly remembered your credentials? ",c.default.createElement(d.Link,{to:"/login"},c.default.createElement("u",null,"Log in.")))))};E.propTypes={};var h=t.Recovery=function(e){return null};h.propTypes={}},274:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return u.default.createElement("div",null,u.default.createElement("h2",null,"Hey There!"))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(2),u=r(o);a.propTypes={}},275:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.logs,n=void 0===t?[]:t;return l.default.createElement("article",null,l.default.createElement("header",null,l.default.createElement("h3",null,"Server Messages")),l.default.Children.toArray(n.map(function(e){return l.default.createElement(o,e)})))}function o(e){var t=e.message,n=void 0===t?"":t,r=e.timestamp,a=void 0===r?0:r;return l.default.createElement("section",null,l.default.createElement("p",null,n),l.default.createElement("p",null,new Date(a).toString()))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a,t.Entry=o;var u=n(2),l=r(u);a.propTypes={logs:u.PropTypes.array},o.propTypes={message:u.PropTypes.string,timestamp:u.PropTypes.number}},276:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),s=r(i),c=n(296),d=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={mimeType:"",codec:"",bitsPerSecond:128e3,audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,streaming:!1,recorder:!1,recordingStart:!1,recording:!1,playing:!1},n.Recorder=n.Recorder.bind(n),n.RecorderOptions=n.RecorderOptions.bind(n),n.getUserMedia=n.getUserMedia.bind(n),n}return u(t,e),l(t,[{key:"render",value:function(){var e=this.Recorder;this.RecorderOptions;return s.default.createElement("div",{className:"media"},s.default.createElement(e,null))}},{key:"Player",value:function(e){this.state.playing;return s.default.createElement("section",null)}},{key:"Download",value:function(e){this.state.playing;return s.default.createElement("section",null)}},{key:"RecorderOptions",value:function(e){var t=this,n=this.state,r=n.mimeType,a=n.bitsPerSecond,o=n.audioBitsPerSecond,u=n.videoBitsPerSecond;return s.default.createElement("div",null,s.default.createElement("section",null,s.default.createElement("header",null,s.default.createElement("p",null,"MIME: ",r||"none"),s.default.createElement("p",null,"Bits Per Second: ",a||0),s.default.createElement("p",null,"Audio Bits Per Second: ",o||0),s.default.createElement("p",null,"Video Bits Per Second: ",u||0)),s.default.createElement("p",null,s.default.createElement("label",null,"MIME Type:",s.default.createElement("select",{onChange:function(e){t.setState({mimeType:e.target.value})}},s.default.createElement("option",{value:"audio/ogg"},"Audio: OGG"),s.default.createElement("option",{value:"audio/mpeg"},"Audio: MPEG"),s.default.createElement("option",{value:"video/mp4"},"Video: MP4"),s.default.createElement("option",{value:"video/mpeg"},"Video: MPEG")))),s.default.createElement("p",null,s.default.createElement("label",null,"Bits Per Second: ",s.default.createElement("select",{onChange:function(e){t.setState({bitsPerSecond:e.target.value})}},s.default.createElement("option",{value:"128000"},"128 kbps"),s.default.createElement("option",{value:"192000"},"192 kbps"),s.default.createElement("option",{value:"256000"},"256 kbps"),s.default.createElement("option",{value:"320000"},"320 kbps")))),s.default.createElement("p",null,s.default.createElement("label",null,"Audio Bits Per Second: ",s.default.createElement("select",{onChange:function(e){t.setState({audioBitsPerSecond:e.target.value})}},s.default.createElement("option",{value:"128000"},"128 kbps"),s.default.createElement("option",{value:"192000"},"192 kbps"),s.default.createElement("option",{value:"256000"},"256 kbps"),s.default.createElement("option",{value:"320000"},"320 kbps")))),s.default.createElement("p",null,s.default.createElement("label",null,"Video Bits Per Second: ",s.default.createElement("select",{onChange:function(e){t.setState({videoBitsPerSecond:e.target.value})}},s.default.createElement("option",{value:1843200},"320 x 240"),s.default.createElement("option",{value:7372800},"480 x 640"),s.default.createElement("option",{value:18874368},"1024 x 768")))),s.default.createElement("p",null,s.default.createElement("button",{onClick:function(e){t.record({audio:!0},function(e){})}},"Record Media"))))}},{key:"Recorder",value:function(e){var t=this,n=this.state,r=n.recorder,a=n.recordingStart,o=n.recording,u=this.RecorderOptions;return r?s.default.createElement("section",null,s.default.createElement("p",null,s.default.createElement("button",{onClick:function(e){o?t.recorder.pause():t.recorder.resume()}},o?"Pause":"Resume")),s.default.createElement("p",null,s.default.createElement("button",{onClick:function(e){a?t.recorder.stop():t.recorder.start()}},o?"Stop":"Start"))):s.default.createElement(u,null)}},{key:"downloadChunks",value:function(){new Blob(this.recordingChunks,{type:this.state.mimeType});this.recordingChunks=[]}},{key:"record",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{audio:!0},n=arguments[1],r=this.state,a=r.mimeType,o=r.bitsPerSecond;r.audioBitsPerSecond,r.videoBitsPerSecond;return this.getUserMedia(t,function(t){(0,c.MediaRecorder)(t,{mimeType:a,bitsPerSecond:o}).then(function(t){e.setState({recorder:!0},function(){e.recordingChunks=[],t.ondataavailable(function(t){e.recordingChunks.push(t.data)}),t.onstart(function(t){e.setState({recordingStart:!0,recording:!0})}),t.onstop(function(t){e.setState({recordingStart:!1,recording:!1})}),t.onresume(function(t){e.setState({recording:!0})}),t.onpause(function(t){e.setState({recording:!1})}),t.onerror(function(n){e.setState({error:new Error({type:"MediaRecorder",state:{mimeType:t.mimeType,audioBitsPerSecond:t.audioBitsPerSecond,videoBitsPerSecond:t.videoBitsPerSecond,state:t.state},message:n.message})})}),e.recorder=t,n?n(t):null})}).catch(function(e){return console.log(e)})})}},{key:"getUserMedia",value:function(e,t){var n=this;return this.stream?this.stream:(0,c.GUM)(e).then(function(e){return console.log("GUM stream: ",e),n.setState({streaming:!0},function(){n.stream=e,t?t(e):null}),e}).catch(function(e){return console.log(e)})}}]),t}(i.PureComponent);t.default=d,d.propTypes={},d.defaultProps={mimeTypes:{audio:["audio/webm","audio/webm;codecs=opus","audio/ogg; codecs=opus"],video:["video/webm","video/webm;codecs=vp8","video/webm;codecs=daala","video/webm;codecs=h264","video/mpeg"]}}},277:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.messages,n=e.events,r=e.typing,a=e.party,o=e.thread,l=e.composer,s=e.actions;return u.default.createElement("div",{className:"messages"},u.default.createElement(i.default,{messages:t,events:n,typing:r,party:a,thread:o,actions:s}),u.default.createElement("hr",null),u.default.createElement("section",{className:"composer"},u.default.createElement("header",null),u.default.createElement("textarea",{id:"message",value:l.message,onFocus:function(e){return l.isTyping(o._id,!0)},onBlur:function(e){return l.isTyping(o._id,!1)},onChange:function(e){var t=e.target;return l.onChange(t.value)}}),u.default.createElement("footer",null,u.default.createElement("button",{type:"button",onClick:l.sendMessage,disabled:!l.message.length},"Reply"))))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(2),u=r(o),l=n(169),i=r(l)},278:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e._id,n=e.title,r=void 0===n?t:n,a=e.actions;return i.default.createElement("li",null,i.default.createElement(s.Link,{to:"/messenger/"+t},r),i.default.createElement("button",{type:"button",style:{float:"right"},onClick:function(){return a.deleteThread(t)}},"Delete"))}function o(e){var t=e.threads,n=e.actions;return i.default.createElement("div",{className:"messenger-threads"},i.default.createElement("header",null,i.default.createElement("button",{type:"button",onClick:function(e){return e}},"Messages"),i.default.createElement("button",{type:"button",onClick:function(e){return e}},"Invitations"),i.default.createElement("button",{type:"button",onClick:function(e){return e}},"Promotions"),i.default.createElement("button",{type:"button",onClick:function(e){return e}},"Chat")),i.default.createElement("ul",null,t.map(function(e){return i.default.createElement(a,u({key:e._id,actions:n},e))})),i.default.createElement("footer",null,i.default.createElement("button",{type:"button",onClick:function(e){return n.fetchThreads()}},"Fetch Threads"),i.default.createElement("button",{type:"button",onClick:function(e){return n.joinThread()}},"Join Thread")))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=o;var l=n(2),i=r(l),s=n(38);o.propTypes={threads:l.PropTypes.array}},279:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Threads=t.Messages=t.Composer=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),c=r(s),d=n(38),f=n(278),p=r(f),m=n(277),E=r(m),h=n(169),g=r(h);t.Composer=E.default,t.Messages=g.default,t.Threads=p.default;var y=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={message:"",typing:!1},n.emit=n.emit.bind(n),n.sendMessage=n.sendMessage.bind(n),n.updateMessage=n.updateMessage.bind(n),n.deleteMessage=n.deleteMessage.bind(n),n.isTyping=n.isTyping.bind(n),n.fetchThreads=n.fetchThreads.bind(n),n.createThread=n.createThread.bind(n),n.editThread=n.editThread.bind(n),n.deleteThread=n.deleteThread.bind(n),n.joinThread=n.joinThread.bind(n),n.leaveThread=n.leaveThread.bind(n),n}return u(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this.props.params.id;this.props.socket.connect("/threads"),e&&this.joinThread(e)}},{key:"componentWillUpdate",value:function(e,t){var n=t.typing,r=t.message,a=t.length,o=void 0===a?r.length:a,u=e.messenger.thread;n&&o!==this.state.message.length?0===o?this.isTyping(u,!1):0===this.state.message.length&&this.isTyping(u,!0):0===o&&0!==this.state.message.length&&this.isTyping(u,!1)}},{key:"componentWillReceiveProps",value:function(e){var t=(e.router,e.params),n=e.messenger,r=t.id,a=this.props.params.id;r?a&&a!==r?this.leaveThread(a):r&&!n.thread&&this.joinThread(r):a&&a!==r&&this.leaveThread(a)}},{key:"componentWillUnmount",value:function(){var e=this.props.params.id;e&&this.leaveThread(e),this.props.socket["/threads"].disconnect()}
},{key:"render",value:function(){var e=this,t=this.props,n=this.emit,r=this.sendMessage,a=this.updateMessage,o=this.deleteMessage,u=this.fetchThreads,l=this.deleteThread,i=this.joinThread,s=this.leaveThread,f=t.messenger||{},p=f.threads,m=f.messages,E=f.events,h=f.typing,g=f.party,y=f.thread;f.actions;return c.default.createElement("section",{className:"messenger"},c.default.createElement("header",null,c.default.createElement("div",null,c.default.createElement(d.IndexLink,{to:"/messenger"},"Threads"))),c.default.cloneElement(t.children,{threads:p,messages:m,events:E,typing:h,party:g,thread:y,composer:{onChange:function(t){return e.setState({message:t})},message:this.state.message,isTyping:function(t){return e.setState({typing:t})},typing:this.state.typing,sendMessage:function(){return r(e.state.message,y)}},actions:{emit:n,updateMessage:a,deleteMessage:o,deleteThread:l,fetchThreads:u,joinThread:i,leaveThread:s}}),c.default.createElement("footer",null))}},{key:"emit",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=this.props.socket["/threads"].send,o=this.props.socket["/threads"].id;return a({type:"",name:e,action:t,data:l({},n,{id:o})},function(e){console.log("acknowledgement message: ",e),r(e)})}},{key:"sendMessage",value:function(e,t){var n=this;return this.emit("message","post",{message:e,thread:t},function(e){var t=e.data,r=e.error;return console.log(e,t,r),n.setState({message:"",typing:!1},function(){return n.props.dispatch({type:"MESSENGER_NEW_MESSAGE",message:t.message})})})}},{key:"updateMessage",value:function(e,t,n){var r=this;return this.emit("message","edit",{_id:e,message:t,thread:n},function(a){var o=a.data,u=a.error;return console.log(e,t,n,a,o,u),r.setState({message:""},function(){return r.props.dispatch({type:"MESSENGER_UPDATE_MESSAGE",message:o.message})})})}},{key:"deleteMessage",value:function(e){var t=this;return this.emit("message","delete",{_id:e},function(n){var r=n.data,a=n.error;return console.log(e,n,r,a),t.props.dispatch({type:"MESSENGER_DELETE_MESSAGE",message:r.message})})}},{key:"isTyping",value:function(e,t){return this.emit("thread","typing",{thread:e,typing:t},function(e){return e})}},{key:"fetchThreads",value:function(){var e=this;return this.emit("thread","fetch",{},function(t){var n=t.data,r=t.error;return console.log(n,r),n?e.props.dispatch({type:"MESSENGER_FETCH_THREADS",threads:n.threads||[]}):console.log(r)})}},{key:"createThread",value:function(e,t){var n=this;return this.emit("thread","create",{title:e,party:t},function(e){var t=e.data,r=e.error,a=t.thread;return t&&a?n.props.dispatch({type:"MESSENGER_CREATE_THREAD",thread:a}):console.log(r)})}},{key:"editThread",value:function(e,t,n){var r=this;return this.emit("thread","edit",{thread:e,party:t,title:n},function(e){var t=e.data,n=e.error,a=t.thread;return t&&a?r.props.dispatch({type:"MESSENGER_UPDATE_THREAD",thread:a}):console.log(n)})}},{key:"deleteThread",value:function(e){var t=this;return this.emit("thread","delete",{thread:e},function(e){var n=e.data;e.error;return n&&t.props.params.id===n.thread._id&&t.props.router.push("/messenger"),n&&t.props.dispatch({type:"MESSENGER_REMOVE_THREAD",thread:n.thread})})}},{key:"joinThread",value:function(e){var t=this;return this.emit("thread","join",{thread:e},function(e){var n=e.data,r=e.error;return console.log(n,r,n.thread,n.messages),n&&n.thread?t.props.dispatch({type:"MESSENGER_JOIN_THREAD",thread:n.thread,messages:n.messages,party:n.thread.party})&&t.props.router.push("/messenger/"+n.thread._id):console.log(r)})}},{key:"leaveThread",value:function(e){var t=this;return this.emit("thread","leave",{thread:e},function(e){var n=(e.data,e.error);return t.props.dispatch({type:"MESSENGER_LEAVE_THREAD",error:n})})}}]),t}(c.default.Component);t.default=y,y.propTypes={}},280:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){e.children,e.user;return u.default.createElement("header",{className:"menu"},u.default.createElement(l.IndexLink,{to:"/"},u.default.createElement("h1",null,u.default.createElement("i",null,"100"))),u.default.createElement(l.Link,{to:"/login"},u.default.createElement("h2",null,"Login")),u.default.createElement(l.Link,{to:"/register"},u.default.createElement("h2",null,"Sign Up")),u.default.createElement(l.Link,{to:"/triage"},u.default.createElement("h2",null,"Help Desk")),u.default.createElement(l.Link,{to:"/account"},u.default.createElement("h2",null,"Account")),u.default.createElement(l.Link,{to:"/messenger"},u.default.createElement("h2",null,"Message ",u.default.createElement("img",{src:"images/aim.logo.png",height:"24px"}))),u.default.createElement(l.Link,{to:"/posts"},u.default.createElement("h2",null,"Posts")),u.default.createElement(l.Link,{to:"/media"},u.default.createElement("h2",null,"Media")),u.default.createElement(l.Link,{to:"/todo"},u.default.createElement("h2",null,"Todo")),u.default.createElement(l.Link,{to:"/log"},u.default.createElement("h2",null,"Log")))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(2),u=r(o),l=n(38)},281:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),s=r(i),c="48px",d=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={message:""};var r=n.Thread=n.Thread.bind(n);r.propTypes={title:i.PropTypes.string};var u=n.Message=n.Message.bind(n);u.propTypes={from:i.PropTypes.string,text:i.PropTypes.string};n.Composer=n.Composer.bind(n);return n}return u(t,e),l(t,[{key:"Thread",value:function(e){var t=e.messages,n=this.Message,r=this.Composer;return s.default.createElement("section",null,t.length?s.default.createElement("ul",{className:"message-thread"},s.default.Children.toArray(t.map(function(e){return s.default.createElement("li",null,s.default.createElement(n,e))}))):null,s.default.createElement("hr",null),s.default.createElement(r,null))}},{key:"Message",value:function(e){var t=this.MessageReactions,n=(e._id,e.title),r=e.from,a=e.text,o=e.timestamp,u=e.comments,l=void 0===u?[]:u;e.likes;return s.default.createElement("article",{className:"message"},s.default.createElement("header",null,s.default.createElement("h3",null,n),s.default.createElement("cite",{className:"message-author"},r)),s.default.createElement("section",null,s.default.createElement("blockquotes",null,s.default.createElement("p",{className:"message-text"},a))),s.default.createElement(t,{comments:l}),s.default.createElement("footer",null,s.default.createElement("time",{className:"message-timestamp",dateTime:new Date(o).toString()},o)))}},{key:"MessageReactions",value:function(e){var t=e.comments;return s.default.createElement("aside",{className:"message-reactions"},s.default.Children.toArray([s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/like-2.svg",height:"40px"})),s.default.createElement("span",null,t.length+" comments"),s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/badge.reply.svg",height:"40px"})),s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/compose.svg",height:"40px"})),s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/garbage-1.svg",height:"40px"}))].concat([s.default.createElement("button",{type:"button"},"Share")])))}},{key:"MessageFlags",value:function(e){return s.default.createElement("div",null,s.default.createElement("button",{type:"button"},"Inappropriate"),s.default.createElement("button",{type:"button"},"Vulgar"),s.default.createElement("button",{type:"button"},"Threatening"))}},{key:"Composer",value:function(e){var t=this,n=this.state.message;return s.default.createElement("div",{className:"composer"},s.default.createElement("div",{className:"compose-types"},s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/compose.svg",height:c})),s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/microphone-1.svg",height:c})),s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/photo-camera.svg",height:c})),s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/video-camera.svg",height:c}))),s.default.createElement("div",{className:"compose-tags",style:{width:"20%",float:"right"}},s.default.createElement("button",null,s.default.createElement("img",{src:"icons/essentials/placeholder.svg",height:c})),s.default.createElement("h3",null,s.default.createElement("button",{type:"button"},"$")),s.default.createElement("h3",null,s.default.createElement("button",{type:"button"},"#")),s.default.createElement("h3",null,s.default.createElement("button",{type:"button"},"@")),s.default.createElement("h3",null,s.default.createElement("button",{type:"button"},"&"))),s.default.createElement("form",{id:"composer",onSubmit:function(e){return e.preventDefault()},style:{width:"80%",float:"left"}},s.default.createElement("div",null,s.default.createElement("input",{name:"composer-title",type:"text",placeholder:"Title",value:n,onChange:function(e){return t.setState({title:e.target.value})}})),s.default.createElement("div",null,s.default.createElement("input",{name:"composer-message",type:"text",placeholder:"Message",value:n,onChange:function(e){return t.setState({message:e.target.value})}})),s.default.createElement("button",{type:"submit"},s.default.createElement("img",{src:"icons/paper-plane.svg",height:c}))))}},{key:"ComposerActions",value:function(e){return s.default.createElement("aside",{className:"composer-actions"},s.default.createElement("button",{type:"button"},"Save"),s.default.createElement("button",{type:"button"},"Discard"),s.default.createElement("button",{type:"button"},"Send"))}},{key:"ComposerTypes",value:function(e){return s.default.createElement("div",{className:"composer-types"},s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/edit.svg",height:c})),s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/microphone-1.svg",height:c})),s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/photo-camera.svg",height:c})),s.default.createElement("button",{type:"button"},s.default.createElement("img",{src:"icons/essentials/video-camera.svg",height:c})))}},{key:"ComposerTags",value:function(e){return s.default.createElement("div",{className:"composer-tags"},s.default.createElement("button",{type:"button"},"Usertag"),s.default.createElement("button",{type:"button"},"Hashtag"),s.default.createElement("button",{type:"button"},"Geotag"),s.default.createElement("button",{type:"button"},"Datetag"),s.default.createElement("button",{type:"button"},"Cashtag"),s.default.createElement("button",{type:"button"},"Labeltag"))}},{key:"render",value:function(){var e=this.Thread;return s.default.createElement("section",{className:"messenger"},s.default.createElement(e,{messages:this.props.messages}))}}]),t}(s.default.PureComponent);t.default=d,d.propTypes={messages:i.PropTypes.array},d.defaultProps={messages:[{_id:"akcgi778eiuco7hai",title:"Superbowl",from:"@mike",text:"This is outrageous!"}]}},282:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),u=n(38),l=n(106),i=n(284),s=r(i),c=function(e){var t=e.store,n=e.history,r=void 0===n?u.browserHistory:n;return o.default.createElement(l.Provider,{store:t},o.default.createElement(u.Router,{history:r,routes:s.default,createElement:function(e,t){return o.default.createElement(e,t)}}))};c.propTypes={store:a.PropTypes.object.isRequired,history:a.PropTypes.object.isRequired},t.default=c},283:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),c=r(s),d=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={connected:!1,text:"",todos:[]},n.Todo=n.Todo.bind(n),n.init=n.init.bind(n),n.destroy=n.destroy.bind(n),n.connect=n.connect.bind(n),n.disconnect=n.disconnect.bind(n),n.fetch=n.fetch.bind(n),n.create=n.create.bind(n),n.edit=n.edit.bind(n),n.discard=n.discard.bind(n),n}return u(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this.init();console.log(e)}},{key:"componentWillUnmount",value:function(){this.todos.destroy()}},{key:"render",value:function(){var e=this,t=(this.props,this.state),n=this.Todo,r=t.connected,a=t.text,o=t.todos;return c.default.createElement("section",{className:"todos"},c.default.createElement("header",null,c.default.createElement("h3",null,"Todos")),c.default.createElement("ul",null,o.map(function(e){return c.default.createElement(n,l({key:e._id},e))})),c.default.createElement("hr",null),c.default.createElement("form",{id:"todo-maker",onSubmit:function(e){return e.preventDefault()}},c.default.createElement("input",{type:"text",onChange:function(t){var n=t.target;return e.setState({text:n.value})},value:a}),c.default.createElement("button",{type:"button",disabled:!r,onClick:function(t){return e.create(a)}},"Create")),c.default.createElement("footer",null,c.default.createElement("p",null,"Count: ",o.length),c.default.createElement("button",{type:"button",disabled:!r,onClick:function(){return e.fetch()}},"Fetch"),c.default.createElement("button",{type:"button",onClick:r?this.disconnect:this.connect},r?"Disconnect":"Connect")))}},{key:"Todo",value:function(e){var t=this,n=e._id,r=e.text,a=e.completed;e.completedAt;return c.default.createElement("li",{className:"todo-item"},c.default.createElement("p",null,r),c.default.createElement("button",{type:"button",onClick:function(e){return t.edit(n,{text:r,completed:!a})}},a?"complete":"incomplete"),c.default.createElement("button",{type:"button",onClick:function(e){return t.discard(n)}},"Delete"))}},{key:"init",value:function(){if(this.todos)return this.todos;var e=this.todos=this.props.app.io.todo();return this.todoIO=e.init(function(){console.log("onConnect")},function(e){console.log("onMessage: ",e)},function(){console.log("onDisconnect")}),this.todoIO}},{key:"destroy",value:function(){this.todos&&(this.todos.destroy(),this.todos=this.todoIO=null)}},{key:"connect",value:function(){return!(!this.todoIO||!this.todoIO.connected)||void this.setState({connected:!0},this.todos.connect)}},{key:"disconnect",value:function(){return!(!this.todoIO||!this.todoIO.disconnected)||void this.setState({connected:!1},this.todos.disconnect)}},{key:"fetch",value:function(e){var t=this;if(this.todos&&this.state.connected)return this.todos.fetch(e,function(e){console.log("response: ",e);var n=e.data;return t.setState({todos:n})})}},{key:"create",value:function(e){var t=this;if(this.todos&&this.state.connected)return this.todos.create({text:e},function(e){var n=e.data;return console.log("todo created - data: ",n),t.setState(function(e){return{text:"",todos:e.todos.concat(n)}})})}},{key:"edit",value:function(e,t){var n=this,r=t.text,a=t.completed;if(this.todos&&this.state.connected)return this.todos.edit({id:e,text:r,completed:a},function(e){var t=e.data;return n.setState(function(e){return{todos:e.todos.map(function(e){return e._id===t._id?t:e})}})})}},{key:"discard",value:function(e){var t=this;if(this.todos&&this.state.connected)return this.todos.delete({id:e},function(e){var n=e.data;return console.log("deleted response: ",e),t.setState(function(e){return{todos:e.todos.filter(function(e){return e._id!==n._id})}})})}}]),t}(c.default.Component);t.default=d,d.propTypes={}},284:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),u=n(38),l=n(272),i=r(l),s=n(274),c=r(s),d=n(273),f=r(d),p=n(271),m=r(p),E=n(279),h=r(E),g=n(283),y=r(g),v=n(276),b=r(v),_=n(281),T=r(_),O=n(275),S=r(O);t.default=o.default.createElement(u.Route,{path:"/",component:i.default},o.default.createElement(u.IndexRoute,{component:c.default}),o.default.createElement(u.Route,{component:f.default},o.default.createElement(u.Route,{name:"Sign In",path:"login",component:d.Login}),o.default.createElement(u.Route,{name:"Register",path:"register",component:d.Register}),o.default.createElement(u.Route,{name:"Triage",path:"triage",component:d.Triage}),o.default.createElement(u.Route,{name:"Recovery",path:"recovery",component:d.Recovery}),o.default.createElement(u.Route,{name:"Verification",path:"verify/:token"})),o.default.createElement(u.Route,{name:"Account",path:"account",component:m.default},o.default.createElement(u.IndexRoute,{component:p.Profile})),o.default.createElement(u.Route,{name:"Posts",path:"posts",component:T.default},o.default.createElement(u.Route,{name:"Post",path:":id"})),o.default.createElement(u.Route,{name:"Messenger",path:"messenger",component:h.default},o.default.createElement(u.IndexRoute,{component:E.Threads}),o.default.createElement(u.Route,{name:"Thread",path:":id",component:E.Composer})),o.default.createElement(u.Route,{name:"Media",path:"media",component:b.default}),o.default.createElement(u.Route,{name:"Todo",path:"todo",component:y.default}),o.default.createElement(u.Route,{name:"Server Log",path:"log",component:S.default}),o.default.createElement(u.Route,{path:"*"}))},285:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(170),o=r(a),u=n(286),l=r(u);t.default={io:l.default,todo:o.default}},286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["MESSAGE","INIT","DATA","EMIT","OPEN","CLOSE","FLUSH","DESTROY","CONNECT","RECONNECT","DISCONNECT","AUTHENTICATE","RECONNECTING","OPENED","CLOSED","DESTROYED","INITIALIZED","CONNECTED","DISCONNECTED","RECONNECTED","AUTHORIZED","UNAUTHORIZED","RECONNECT_ATTEMPT","RECONNECT_FAILED","RECONNECT_ERROR","CONNECT_ERROR","ERROR","WARN"].map(function(e){return"IO_"+e}).reduce(function(e,t){return e[t]=t,e},{})},287:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=t.history,r=(0,u.combineReducers)(o({routing:l.routerReducer,socket:(0,p.default)(io)},d.default)),a=e||void 0,i=(0,u.applyMiddleware)((0,l.routerMiddleware)(n),m.ioMessage,s.default)(u.createStore);return i(r,a)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var u=n(83),l=n(82),i=n(163),s=r(i),c=n(291),d=r(c),f=n(171),p=r(f),m=n(288)},288:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ioMessage=t.promise=void 0;var a=n(290),o=r(a),u=n(289),l=r(u);t.promise=o.default,t.ioMessage=l.default},289:function(e,t,n){"use strict";function r(e){var t=(e.getState,e.dispatch);return function(e){return function(n){var r=n.type,a=n.payload;return"@@io/MESSAGE"===r?function(){var n=a.name,o=a.action,u=a.data,l=u||{},i=l.thread,s=l.threads,c=l.messages,d=l.user,f=l.message,p=l.time,m=l.typing,E=l.error;switch(console.group(r+", "+n+":"+o),E?console.log("error: ",E):null,u?console.log("data: ",u):null,console.groupEnd(r+", "+n+":"+o),n+":"+o){default:return e(o);case"message:posted":return t({type:"MESSENGER_NEW_MESSAGE",user:d,message:f});case"message:edited":return t({type:"MESSENGER_UPDATE_MESSAGE",user:d,message:f});case"message:deleted":return t({type:"MESSENGER_DELETE_MESSAGE",user:d,message:f});case"thread:connected":return t({type:"MESSENGER_FETCH_THREADS",threads:s,messages:c,event:{action:o,user:d,time:p}});case"thread:created":return t({type:"MESSENGER_CREATE_THREAD",thread:i,event:{action:o,user:d,time:p}});case"thread:updated":return t({type:"MESSENGER_UPDATE_THREAD",thread:i,event:{action:o,user:d,time:p}});case"thread:removed":return t({type:"MESSENGER_REMOVE_THREAD",thread:i,event:{action:o,user:d,time:p}});case"thread:joined":return t({type:"MESSENGER_JOINED_EVENT",thread:i,event:{action:o,user:d,time:p}});case"thread:left":return t({type:"MESSENGER_LEFT_EVENT",thread:i,event:{action:o,user:d,time:p}});case"thread:typing":return t({type:"MESSENGER_TYPING_EVENT",thread:i,typing:m,event:{action:o,user:d,time:p}});case"thread:error":return t({type:"MESSENGER_ERROR",thread:i,error:E,event:{action:o,user:d,time:p}})}}():e(n)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return function(t){return function(n){return"function"!=typeof n.then?t(n):Promise.resolve(n).then(e.dispatch)}}};t.default=r},291:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(293),o=r(a),u=n(294),l=r(u),i=n(295),s=r(i),c=n(292),d=r(c);t.default={tokens:l.default,user:s.default,messenger:d.default,todo:o.default}},292:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[],threads:[],events:[],typing:[],errors:[],party:[],thread:null},t=arguments[1],n=t.user,a=t.type,b=t.error,_=t.messages,T=void 0===_?[]:_,O=t.threads,S=t.event,k=t.typing,P=t.message,M=t.party,w=t.thread;switch(/^MESSENGER/.test(a)&&S&&(console.group("message event"),console.log(S,t),console.groupEnd("message event"),e.events=e.events.concat(S)),a){default:return e;case v:return o({},e,{errors:e.errors.concat(b)});case l:return o({},e,{messages:T});case i:return o({},e,{messages:e.messages.concat(P)});case s:return e.messages[e.messages.findIndex(function(e){var t=e._id;return t===P._id})]=P,o({},e,{messages:[].concat(r(e.messages))});case c:return o({},e,{messages:e.messages.filter(function(e){var t=e._id;return t!==P._id})});case u:return o({},e,{threads:O});case d:return o({},e,{thread:w,messages:e.messages.concat(T),party:M});case E:return o({},e,{thread:null,party:[]});case f:return o({},e,{threads:e.threads.concat(w)});case p:return o({},e,{threads:e.threads.reduce(function(e,t){return e._id===w._id?t.concat(w):t.concat(e)},[])});case m:return o({},e,{threads:e.threads.filter(function(e){return e._id!==w._id})});case h:return o({},e,{thread:w,party:e.party.concat({id:n,present:!0,time:Date.now()})});case g:return o({},e,{thread:w,party:e.party.filter(function(e){return n!==e.id})});case y:return o({},e,{typing:k?e.typing.concat(S.user):e.typing.filter(function(e){return S.user!==e})})}}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var u="MESSENGER_FETCH_THREADS",l="MESSENGER_FETCH_MESSAGES",i="MESSENGER_NEW_MESSAGE",s="MESSENGER_UPDATE_MESSAGE",c="MESSENGER_DELETE_MESSAGE",d="MESSENGER_JOIN_THREAD",f="MESSENGER_CREATE_THREAD",p="MESSENGER_UPDATE_THREAD",m="MESSENGER_REMOVE_THREAD",E="MESSENGER_LEAVE_THREAD",h="MESSENGER_JOINED_EVENT",g="MESSENGER_LEFT_EVENT",y="MESSENGER_TYPING_EVENT",v="MESSENGER_ERROR"},293:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{todos:[],todo:{id:"",text:"",title:"",createAt:"",updateAt:"",completed:!1}},t=arguments[1],n=t.type,r=t.todos,u=void 0===r?[]:r;switch(n){default:return e;case o.FETCH_TODOS:return a({},e,{todos:u});case o.CREATE_TODO:return e;case o.DELETE_TODO:return e;case o.UPDATE_TODO:return e}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=n(170)},294:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_supported:!1,local:{login:null},jwt:null},t=arguments[1],n=t.type,r=t.key,o=t.value;t.set;switch(n){default:return e;case"@@redux/INIT":if(window&&"localStorage"in window){e._supported=!0;for(var u=0;u<localStorage.length;u++){var l=localStorage.key(u),i=localStorage.getItem(l);e.local[l]=i}return a({},e)}return e;case"@@tokens/SET":return e._supported&&(localStorage.setItem(r,o),e.local[r]=o),a({},e);case"@@tokens/REMOVE":return e._supported&&(localStorage.removeItem(r,o),delete e.local[r]),a({},e);case"@@tokens/CLEAR":return localStorage.clear(),a({},e,{local:{}})}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r},295:function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{token:null,id:null,email:"",password:"",loggedIn:!1},t=arguments[1],n=t.type,r=t.user,o=t.token;switch(n){default:return e;case u:return a({},e,{token:o,id:r._id,email:r.email,loggedIn:!0});case l:return a({},e,{token:null,id:null,email:"",loggedIn:!1})}}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var o=["@@user/LOGIN","@@user/LOGOUT"],u=o[0],l=o[1]},296:function(e,t,n){"use strict";function r(e){var t=window.navigator;return void 0===t.mediaDevices&&(t.mediaDevices={}),void 0!==t.mediaDevices.getUserMedia?t.mediaDevices.getUserMedia(e):void(t.mediaDevices.getUserMedia=function(e){var n=t.getUserMedia||t.webkitGetUserMedia||t.mozGetUserMedia;return n?new Promise(function(r,a){n.call(t,e,r,a)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))})}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"MediaRecorder"in window?e?new Promise(function(n,r){var u=t.mimeType,l=(t.audioBitsPerSecond,t.videoBitsPerSecond,t.bitsPerSecond,{});if(u&&"string"==typeof u&&"isTypeSupported"in a&&a.isTypeSupported(u))l.mimeType=u;else if(u instanceof Array){var i=!0,s=!1,c=void 0;try{for(var d,f=u[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p=d.value;if(a.isTypeSupported(p)){l.mimeType=p;break}}}catch(e){s=!0,c=e}finally{try{!i&&f.return&&f.return()}finally{if(s)throw c}}}n(new a(e,o({},t,l)))}):Promise.reject(new Error("Please pass in a media stream")):Promise.reject(new Error("MediaRecorder not supported."))}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.GUM=r,t.MediaRecorder=a},481:function(e,t){},624:function(e,t,n){e.exports=n(252)}},[624]);